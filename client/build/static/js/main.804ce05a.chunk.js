(this.webpackJsonpmflow=this.webpackJsonpmflow||[]).push([[0],{101:function(e,t,n){e.exports=n(167)},106:function(e,t,n){},107:function(e,t,n){},108:function(e,t,n){},109:function(e,t,n){},110:function(e,t,n){},111:function(e,t,n){},166:function(e,t,n){},167:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(99),l=n.n(o),s=(n(106),n(107),n(4)),i=n(5),c=n(12),u=n(11),m=(n(108),function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"getMonthTotalIncome",value:function(){return null!==this.props.currentAnnualStatement?this.props.currentAnnualStatement.getMonthTotalIncome(this.props.currentMonth).toFixed(2):0}},{key:"getMonthTotalExpense",value:function(){return null!==this.props.currentAnnualStatement?this.props.currentAnnualStatement.getMonthTotalExpense(this.props.currentMonth).toFixed(2):0}},{key:"getAnnualTotalIncome",value:function(){return null!==this.props.currentAnnualStatement?this.props.currentAnnualStatement.totalIncome.toFixed(2):0}},{key:"getAnnualTotalExpense",value:function(){return null!==this.props.currentAnnualStatement?this.props.currentAnnualStatement.totalExpense.toFixed(2):0}},{key:"renderCategoryTotals",value:function(){if(null!==this.props.currentAnnualStatement)return this.props.currentAnnualStatement.getMonthStatement(this.props.currentMonth).getCategoriesIncomeExpenseTotal().map((function(e){return r.a.createElement("div",{className:"SummaryPage-income-expense-category"},e.category,":",r.a.createElement("span",{className:"income-indicator"},"\u25b2")," $",e.income,r.a.createElement("span",{className:"expense-indicator"},"\u25bc")," $",e.expense)}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"SummaryPage-body"},r.a.createElement("div",{className:"SummaryPage-header-label SummaryPage-main-header-label"},"Summary"),r.a.createElement("div",null,r.a.createElement("div",{className:"SummaryPage-header-label"},"This Month"),r.a.createElement("div",{className:"SummaryPage-income-expense-block"},r.a.createElement("div",{className:"SummaryPage-income-expense-line"},r.a.createElement("span",{className:"income-indicator"},"\u25b2"),"$",this.getMonthTotalIncome()),r.a.createElement("div",{className:"SummaryPage-income-expense-line"},r.a.createElement("span",{className:"expense-indicator"},"\u25bc"),"$",this.getMonthTotalExpense()))),r.a.createElement("div",null,this.renderCategoryTotals()),r.a.createElement("div",null,r.a.createElement("div",{className:"SummaryPage-header-label"},"This Year"),r.a.createElement("div",{className:"SummaryPage-income-expense-block"},r.a.createElement("div",{className:"SummaryPage-income-expense-line"},r.a.createElement("span",{className:"income-indicator"},"\u25b2"),"$",this.getAnnualTotalIncome()),r.a.createElement("div",{className:"SummaryPage-income-expense-line"},r.a.createElement("span",{className:"expense-indicator"},"\u25bc"),"$",this.getAnnualTotalExpense()))))}}]),n}(r.a.Component)),d=(n(109),n(110),Object(i.a)((function e(t,n,a,r,o,l,i){Object(s.a)(this,e),this.id=t,this.date=n,this.income=a,this.expense=r,this.category=o,this.location=l,this.description=i}))),h=function(){function e(t,n,a){Object(s.a)(this,e),this.year=t,this.month=+n,this.day=+a}return Object(i.a)(e,[{key:"equal",value:function(e){return this.year===e.year&&this.month===e.month&&this.day===e.day}}]),e}(),p=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).onAddEntry=function(){var e=a.state.inputDate.split("/");console.log(e),a.props.onAddEntry(new d(a.state.idCount,new h(e[0],e[1],e[2]),a.state.inputIncome,a.state.inputExpense,a.state.inputCategory,a.state.inputLocation,a.state.inputDescription)),a.setState({idCount:a.state.idCount+1}),console.log(a.state.inputIncome)},a.onAddCategory=function(){a.state.inputNewCategory.length>0&&a.props.onAddCategory(a.state.inputNewCategory)},a.state={idCount:0,inputDate:"2022/1/1",inputCategory:"abc",inputLocation:"soeb",inputIncome:"123",inputExpense:"423",inputDescription:"dsafsafsd",inputNewCategory:""},a}return Object(i.a)(n,[{key:"timeNow",value:function(){var e=new h;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+(e.getHours()+":"+e.getMinutes()+":"+e.getSeconds())}},{key:"updateInput",value:function(e,t){var n=t.target.value;0===e?this.setState({inputDate:n}):1===e?this.setState({inputCategory:n}):2===e?this.setState({inputLocation:n}):3===e?this.setState({inputIncome:n}):4===e?this.setState({inputExpense:n}):5===e?this.setState({inputDescription:n}):6===e&&this.setState({inputNewCategory:n})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"AddPage-body"},r.a.createElement("div",{className:"AddPage-header-label"},"Add Entry"),r.a.createElement("div",{className:"AddPage-form"},r.a.createElement("div",{className:"AddPage-field-block"},r.a.createElement("div",{className:"AddPage-field-label"},"Date"),r.a.createElement("input",{className:"AddPage-field-input",inputMode:"text",value:this.state.inputDate,onChange:function(t){return e.updateInput(0,t)}})),r.a.createElement("div",{className:"AddPage-field-block"},r.a.createElement("div",{className:"AddPage-field-label"},"Category"),r.a.createElement("input",{className:"AddPage-field-input",inputMode:"text",value:this.state.inputCategory,onChange:function(t){return e.updateInput(1,t)}})),r.a.createElement("div",{className:"AddPage-field-block"},r.a.createElement("div",{className:"AddPage-field-label"},"Location"),r.a.createElement("input",{className:"AddPage-field-input",inputMode:"text",value:this.state.inputLocation,onChange:function(t){return e.updateInput(2,t)}})),r.a.createElement("div",{className:"AddPage-field-block"},r.a.createElement("div",{className:"AddPage-field-label"},"Income"),r.a.createElement("input",{className:"AddPage-field-input",inputMode:"numeric",value:this.state.inputIncome,onChange:function(t){return e.updateInput(3,t)}})),r.a.createElement("div",{className:"AddPage-field-block"},r.a.createElement("div",{className:"AddPage-field-label"},"Expense"),r.a.createElement("input",{className:"AddPage-field-input",inputMode:"numeric",value:this.state.inputExpense,onChange:function(t){return e.updateInput(4,t)}})),r.a.createElement("div",{className:"AddPage-field-block"},r.a.createElement("div",{className:"AddPage-field-label"},"Description"),r.a.createElement("input",{className:"AddPage-field-input",inputMode:"text",value:this.state.inputDescription,onChange:function(t){return e.updateInput(5,t)}})),r.a.createElement("br",null),r.a.createElement("div",{className:"AddPage-field-block"},r.a.createElement("button",{className:"AddPage-form-btn",onClick:function(){return e.onAddEntry()}},"Add"),r.a.createElement("button",{className:"AddPage-form-btn"},"Clear"))),r.a.createElement("br",null),r.a.createElement("div",{className:"AddPage-header-label"},"Add Category"),r.a.createElement("div",{className:"AddPage-form"},r.a.createElement("div",{className:"AddPage-field-block"},r.a.createElement("div",{className:"AddPage-field-label"},"Category"),r.a.createElement("input",{className:"AddPage-field-input",inputMode:"text",value:this.state.inputNewCategory,onChange:function(t){return e.updateInput(6,t)}})),r.a.createElement("br",null),r.a.createElement("div",{className:"AddPage-field-block"},r.a.createElement("button",{className:"AddPage-form-btn",onClick:function(){return e.onAddCategory()}},"Add"),r.a.createElement("button",{className:"AddPage-form-btn"},"Clear"))))}}]),n}(r.a.Component),g=(n(111),n(98),n(97),function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:this.props.isDate?"grid-cell grid-cell-date":"grid-cell"},this.props.value)}}],[{key:"newCellId",value:function(){return this.cellId++,this.cellId}}]),n}(r.a.Component));g.cellId=0;var v=g,y=(n(166),function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"renderCells",value:function(e){return e.map((function(e,t){return null===e?r.a.createElement(v,{key:v.newCellId()+"-cell",value:null,isDate:!1}):0===t?r.a.createElement(v,{key:v.newCellId()+"-cell",value:e,isDate:!0}):r.a.createElement(v,{key:v.newCellId()+"-cell",value:e,isDate:!1})}))}},{key:"render",value:function(){return r.a.createElement("div",{className:this.props.isHeaderRow?"grid-row grid-header-row":"grid-row"},this.renderCells(this.props.rowContent))}}],[{key:"newRowId",value:function(){return this.rowId++,this.rowId}}]),n}(r.a.Component));y.rowId=0;var f=y,E=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onChangeViewYear=function(t){var n=t.target.value;e.props.onChangeViewYear(n)},e.onChangeViewMonth=function(t){var n=t.target.value;console.log("Changed: "+n),e.props.onChangeViewMonth(n)},e}return Object(i.a)(n,[{key:"renderGrid",value:function(e){var t=this;if(null!==e){for(var n=e.categories,a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],o=[["Dates"]],l=0;l<31;l++)o.push([a[this.props.currentMonth-1]+" "+(l+1)+", "+this.props.currentAnnualStatement.year]);return o.map((function(e,a){if("Dates"===e[0]){var o=[e];return n.forEach((function(e){o.push([e])})),r.a.createElement(f,{key:f.newRowId()+"-row",rowContent:o,isHeaderRow:!0})}var l=t.props.currentAnnualStatement.getMonthEntries(t.props.currentMonth),s=[e];return n.forEach((function(e){s.push([]),l.forEach((function(n){n.category===e&&n.date.day===+a&&s[s.length-1].push(t.renderEntry(n))}))})),r.a.createElement(f,{key:f.newRowId()+"-row",rowContent:s,isHeaderRow:!1})}))}}},{key:"renderAllEntries",value:function(e){var t=this;return e.map((function(e){return t.renderEntry(e)}))}},{key:"renderEntry",value:function(e){return r.a.createElement("div",{key:e.id,className:"HistoryPage-entry"},r.a.createElement("div",{className:"HistoryPage-entry-main"},r.a.createElement("div",null,e.location),r.a.createElement("div",null,r.a.createElement("span",{className:"income-indicator"},"\u25b2"),"$",e.income),r.a.createElement("div",null,r.a.createElement("span",{className:"expense-indicator"},"\u25bc"),"$",e.expense)),r.a.createElement("div",{className:"HistoryPage-entry-collapse"},e.description))}},{key:"renderSelectOption",value:function(e){return null===e?null:e.map((function(e){return r.a.createElement("option",{key:e+"-view-option",value:e},e)}))}},{key:"getCurrentYear",value:function(){return null!==this.props.currentAnnualStatement?this.props.currentAnnualStatement.year:""}},{key:"getCurrentMonth",value:function(){var e=this;if(null!==this.props.availableMonths){var t=this.props.availableMonths[0];return this.props.availableMonths.forEach((function(n){n!==e.props.currentMonth||(t=e.props.currentMonth)})),t}return""}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"HistoryPage-body"},r.a.createElement("div",{className:"HistoryPage-header-content"},r.a.createElement("div",{className:"HistoryPage-header-label"},"History"),r.a.createElement("div",{className:"HistoryPage-select-label"},"Year"),r.a.createElement("select",{className:"HistoryPage-header-select",value:this.getCurrentYear(),onChange:function(t){return e.onChangeViewYear(t)}},this.renderSelectOption(this.props.availableYears)),r.a.createElement("div",{className:"HistoryPage-select-label"},"Month"),r.a.createElement("select",{className:"HistoryPage-header-select",value:this.getCurrentMonth(),onChange:function(t){return e.onChangeViewMonth(t)}},this.renderSelectOption(this.props.availableMonths))),r.a.createElement("div",{className:"HistoryPage-content","data-simplebar":!0,"data-simplebar-auto-hide":"false"},r.a.createElement("div",{className:"HistoryPage-grid"},this.renderGrid(this.props.currentAnnualStatement))))}}]),n}(r.a.Component),b=function(){function e(t,n){Object(s.a)(this,e),this.id=t,this.month=n,this.totalIncome=0,this.totalExpense=0,this.monthlyEntires=[]}return Object(i.a)(e,[{key:"copy",value:function(e){this.id=e.id,this.month=e.month,this.totalIncome=e.totalIncome,this.totalExpense=e.totalExpense,this.monthlyEntires=e.monthlyEntires}},{key:"calculateTotal",value:function(){var e=this;this.totalIncome=0,this.totalExpense=0,this.monthlyEntires.forEach((function(t){e.totalIncome+=+t.income,e.totalExpense+=+t.expense}))}},{key:"addEntry",value:function(e){this.monthlyEntires.push(e),this.calculateTotal()}},{key:"isStatementEmpty",value:function(){return 0===this.monthlyEntires.length}},{key:"getCategoriesIncomeExpenseTotal",value:function(){var e=[];return this.monthlyEntires.forEach((function(t){for(var n=!1,a=0;a<e.length;a++){var r=e[a];if(r.category===t.category){r.income+=+t.income,r.expense+=+t.expense,e[a]=r,n=!0;break}}n||e.push({category:t.category,income:+t.income,expense:+t.expense})})),e}}]),e}(),S=function(){function e(t){Object(s.a)(this,e),this.year=t,this.totalIncome=0,this.totalExpense=0,this.monthlyStatements=this.initEmptyMonthStatement(),this.categories=[]}return Object(i.a)(e,[{key:"copy",value:function(e){this.year=e.year,this.totalIncome=e.totalIncome,this.totalExpense=e.totalExpense,this.monthlyStatements=this.initEmptyMonthStatement(),this.categories=e.categories;for(var t=0;t<this.monthlyStatements.length;t++)this.monthlyStatements[t].copy(e.monthlyStatements[t])}},{key:"initEmptyMonthStatement",value:function(){for(var e=new Array(12),t=0;t<e.length;t++)e[t]=new b(t,t+1);return e}},{key:"calculateTotal",value:function(){var e=this;this.totalIncome=0,this.totalExpense=0,this.monthlyStatements.forEach((function(t){e.totalIncome+=+t.totalIncome,e.totalExpense+=+t.totalExpense}))}},{key:"replaceMonthlyStatement",value:function(e){this.monthlyStatements[e.month-1]=e,this.calculateTotal()}},{key:"addEntryToMonthStatement",value:function(e,t){null!=this.monthlyStatements[e-1]&&this.monthlyStatements[e-1].addEntry(t),this.calculateTotal()}},{key:"addCategory",value:function(e){return console.log(this.categories),!(this.categories.length>0&&this.categories.includes(e))&&(this.categories.push(e),!0)}},{key:"getMonthTotalIncome",value:function(e){return this.monthlyStatements[e-1].totalIncome}},{key:"getMonthTotalExpense",value:function(e){return this.monthlyStatements[e-1].totalExpense}},{key:"getMonthEntries",value:function(e){return this.monthlyStatements[e-1].monthlyEntires}},{key:"getMonthStatement",value:function(e){return this.monthlyStatements[e-1]}}]),e}(),C=n(62),A=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).CLIENT_ID="91993730445-4jjm5pf1kvja9m8r6b66uarvnqmdir1b.apps.googleusercontent.com",a.ClickCount=0,a.saveIntervalId=setInterval((function(){a.ClickCount>0&&(1===a.ClickCount&&(a.saveToDrive(),console.log("Saved to drive")),--a.ClickCount)}),1e3),a.handleNewEntry=function(e){if(null!==a.getCurrentAnnualStatement()){var t=a.getCurrentAnnualStatement(),n=a.state.currentYearIndex;if(e.date.year!==t.year){var r=!0;if(a.state.allAnnualStatements.forEach((function(t,a){t.year===e.date.year&&(r=!1,n=a)})),r)return void a.addNewAnnualStatementWithEntry(e)}var o=a.state.allAnnualStatements;o[n].addCategory(e.category),o[n].addEntryToMonthStatement(e.date.month,e),a.setState({allAnnualStatements:o,currentYearIndex:n,currentMonth:e.date.month}),a.incrementClickCount()}else a.addNewAnnualStatementWithEntry(e)},a.handleNewCategory=function(e){var t=a.getCurrentAnnualStatement();t.addCategory(e)&&a.setCurrentAnnualStatement(t)},a.handleChangeViewYear=function(e){for(var t=a.state.allAnnualStatements,n=0;n<t.length;++n)if(t[n].year===e){var r=-1;return t[n].monthlyStatements.forEach((function(e){e.isStatementEmpty()||(r=e.month)})),a.setState({currentYearIndex:n,currentMonth:r}),void a.incrementClickCount()}},a.handleChangeViewMonth=function(e){a.setState({currentMonth:e}),a.incrementClickCount()},a.successLoginGoogle=function(e){a.setState({userEmail:e.profileObj.email,userName:e.profileObj.name,isSignedIn:!0}),fetch("/login",{method:"GET",headers:{accessToken:e.tokenObj.access_token}}).then((function(e){return e.json()})).then((function(e){console.log(e.message),a.getDataFromDrive()}))},a.failureLoginGoogle=function(e){console.log("failed to login to google"),console.log(e)},a.successLogoutGoogle=function(){a.setState({isSignedIn:!1,userName:"",userEmail:"",currentMonth:1,currentYearIndex:0,allAnnualStatements:[]}),console.log("successfully logged out of google")},a.saveToDrive=function(){a.state.isSignedIn&&(a.setState({isSaving:!0}),fetch("/save",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a.state)}).then((function(e){return e.json()})).then((function(e){console.log(e.message),console.log("Save Status: ".concat(e.status?"Success":"Failure")),a.setState({isSaving:!1})})))},a.getDataFromDrive=function(){fetch("/get").then((function(e){return e.json()})).then((function(e){if(null!==e.userData){var t=[];e.userData.allAnnualStatements.forEach((function(e){var n=new S(e.year);n.copy(e),t.push(n)})),a.setState({currentMonth:e.userData.currentMonth,currentYearIndex:e.userData.currentYearIndex,allAnnualStatements:t}),console.log(e.message)}else a.saveToDrive()}))},a.state={isSignedIn:!1,userName:"",userEmail:"",isSaving:!1,currentMonth:1,currentYearIndex:0,allAnnualStatements:[]},a}return Object(i.a)(n,[{key:"incrementClickCount",value:function(){this.ClickCount<2&&++this.ClickCount}},{key:"getCurrentAnnualStatement",value:function(){return 0===this.state.allAnnualStatements.length?null:this.state.allAnnualStatements[this.state.currentYearIndex]}},{key:"setCurrentAnnualStatement",value:function(e){var t=this.state.allAnnualStatements;t[this.state.currentYearIndex]=e,this.setState({allAnnualStatements:t}),this.incrementClickCount()}},{key:"addNewAnnualStatementWithEntry",value:function(e){var t=this.state.allAnnualStatements,n=new S(e.date.year);n.addCategory(e.category),n.addEntryToMonthStatement(e.date.month,e),t.push(n);var a=t.length-1;this.setState({allAnnualStatements:t,currentYearIndex:a,currentMonth:e.date.month}),this.incrementClickCount()}},{key:"getAvailableYears",value:function(){var e=[];return this.state.allAnnualStatements.forEach((function(t){e.push(t.year)})),e}},{key:"getAvailableMonths",value:function(){var e=[],t=this.getCurrentAnnualStatement();return null==t?null:(t.monthlyStatements.forEach((function(t){t.isStatementEmpty()||e.push(t.month)})),e)}},{key:"render",value:function(){return r.a.createElement("div",{className:"Dashboard-body"},r.a.createElement("div",{className:"Dashboard-content"},r.a.createElement("div",{className:"Dashbaord-content-left"},r.a.createElement("div",{className:"Dashboard-header"},r.a.createElement("div",{className:"Dashboard-header-label"},"MFlow")),r.a.createElement("div",{className:"Dashboard-content-left-scrollabe","data-simplebar":!0},r.a.createElement("div",{className:"Dashboard-account-block"},r.a.createElement("div",{className:"Dashboard-user-info ".concat(this.state.isSignedIn?"":"Dashboard-disabled")},r.a.createElement("div",{className:"Dashboard-user-info-texts"},r.a.createElement("div",null,this.state.userName),r.a.createElement("div",null,this.state.userEmail)),r.a.createElement("div",{className:"Dashboard-save-status-text ".concat(this.state.isSaving?"":"Dashboard-disabled")},"Saving to Google Drive..."),r.a.createElement(C.GoogleLogout,{clientId:this.CLIENT_ID,buttonText:"Log out",onLogoutSuccess:this.successLogoutGoogle,render:function(e){return r.a.createElement("button",{onClick:e.onClick,disabled:e.disabled,className:"Dashboard-google-button"},"Log out")}})),r.a.createElement("div",{className:"Dashboard-google-login-wrapper ".concat(this.state.isSignedIn?"Dashboard-disabled":"")},r.a.createElement(C.GoogleLogin,{clientId:this.CLIENT_ID,onSuccess:this.successLoginGoogle,onFailure:this.failureLoginGoogle,cookiePolicy:"single_host_origin",scope:"https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/drive.appdata",isSignedIn:!0,render:function(e){return r.a.createElement("button",{onClick:e.onClick,disabled:e.disabled,className:"Dashboard-google-button"},"Log in with Google to save your data!")}}))),r.a.createElement(m,{currentAnnualStatement:this.getCurrentAnnualStatement(),currentMonth:this.state.currentMonth}),r.a.createElement("br",null),r.a.createElement(p,{currentAnnualStatement:this.getCurrentAnnualStatement(),onAddEntry:this.handleNewEntry,onAddCategory:this.handleNewCategory}))),r.a.createElement("div",{className:"Dashboard-content-right"},r.a.createElement(E,{currentAnnualStatement:this.getCurrentAnnualStatement(),currentMonth:this.state.currentMonth,onChangeViewYear:this.handleChangeViewYear,onChangeViewMonth:this.handleChangeViewMonth,availableYears:this.getAvailableYears(),availableMonths:this.getAvailableMonths()}))))}}]),n}(r.a.Component);var N=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"App-body"},r.a.createElement(A,null)))},k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,168)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,o=t.getLCP,l=t.getTTFB;n(e),a(e),r(e),o(e),l(e)}))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(N,null)),document.getElementById("root")),k()}},[[101,1,2]]]);
//# sourceMappingURL=main.804ce05a.chunk.js.map